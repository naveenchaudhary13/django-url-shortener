{% extends 'base.html' %}
{% block title %}Analytics{% endblock %}

{% block content %}
<div class="flex items-center justify-center h-full">
	<div
		id="analytics"
		class="bg-gradient-to-br from-indigo-100 to-blue-200 shadow-lg rounded-xl w-full max-w-5xl p-8 border-t-4 border-indigo-400"
	>
		<h2 class="text-2xl font-bold text-blue-500 text-center mb-6">
			<i class="fa-solid fa-chart-line mr-1"></i> Link Analytics Overview
		</h2>

		<!-- Analytics Cards Grid -->
		<div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
			<!-- Total Clicks -->
			<div class="bg-indigo-50 p-4 rounded-md shadow-md border hover:shadow-lg transform hover:-translate-y-1 transition duration-300">
				<h3 class="text-lg font-semibold text-indigo-600">Total Clicks</h3>
				<p class="text-2xl font-bold text-blue-500">{{ total_clicks }}</p>
			</div>

			<!-- Total URLs -->
			<div class="bg-indigo-50 p-4 rounded-md shadow-md border hover:shadow-lg transform hover:-translate-y-1 transition duration-300">
				<h3 class="text-lg font-semibold text-indigo-600">Total URLs Created</h3>
				<p class="text-2xl font-bold text-blue-500">{{ total_urls }}</p>
			</div>

			<!-- Unique Users -->
			<div class="bg-indigo-50 p-4 rounded-md shadow-md border hover:shadow-lg transform hover:-translate-y-1 transition duration-300">
				<h3 class="text-lg font-semibold text-indigo-600">Unique Users</h3>
				<p class="text-2xl font-bold text-blue-500">{{ unique_users }}</p>
			</div>

			<!-- Top URL -->
			<div class="bg-indigo-50 p-4 rounded-md shadow-md border hover:shadow-lg transform hover:-translate-y-1 transition duration-300">
				<h3 class="text-lg font-semibold text-indigo-600">Top URL</h3>
				{% if top_url %}
					<p class="text-blue-600 underline truncate">
						http://127.0.0.1:8000/shortify-url/{{ top_url.short_code }}
					</p>
					<p class="text-sm text-gray-600 mt-1">Clicks: {{ top_url.click_count }}</p>
				{% else %}
					<p class="text-gray-500">No URLs available</p>
				{% endif %}
			</div>

			<!-- Most Recent URL -->
			<div class="bg-indigo-50 p-4 rounded-md shadow-md border hover:shadow-lg transform hover:-translate-y-1 transition duration-300">
				<h3 class="text-lg font-semibold text-indigo-600">Latest URL Created</h3>
				{% if recent_url %}
					<p class="text-blue-600 underline truncate">
						http://127.0.0.1:8000/shortify-url/{{ recent_url.short_code }}
					</p>
					<p class="text-sm text-gray-600 mt-1">Created: {{ recent_url.created_at }}</p>
				{% else %}
					<p class="text-gray-500">No data</p>
				{% endif %}
			</div>

			<!-- Expiring Soon -->
			<div class="bg-indigo-50 p-4 rounded-md shadow-md border hover:shadow-lg transform hover:-translate-y-1 transition duration-300">
				<h3 class="text-lg font-semibold text-indigo-600">Expiring Soon</h3>
				{% if expiring_soon_url %}
					<p class="text-blue-600 underline truncate">
						http://127.0.0.1:8000/shortify-url/{{ expiring_soon_url.short_code }}
					</p>
					<p class="text-sm text-gray-600 mt-1">Expires: {{ expiring_soon_url.expires_at }}</p>
				{% else %}
					<p class="text-gray-500">No upcoming expiry</p>
				{% endif %}
			</div>
		</div>
	</div>
</div>
{% endblock %}
